(function(t){function e(e){for(var n,o,r=e[0],c=e[1],d=e[2],u=0,p=[];u<r.length;u++)o=r[u],Object.prototype.hasOwnProperty.call(a,o)&&a[o]&&p.push(a[o][0]),a[o]=0;for(n in c)Object.prototype.hasOwnProperty.call(c,n)&&(t[n]=c[n]);l&&l(e);while(p.length)p.shift()();return s.push.apply(s,d||[]),i()}function i(){for(var t,e=0;e<s.length;e++){for(var i=s[e],n=!0,r=1;r<i.length;r++){var c=i[r];0!==a[c]&&(n=!1)}n&&(s.splice(e--,1),t=o(o.s=i[0]))}return t}var n={},a={app:0},s=[];function o(e){if(n[e])return n[e].exports;var i=n[e]={i:e,l:!1,exports:{}};return t[e].call(i.exports,i,i.exports,o),i.l=!0,i.exports}o.m=t,o.c=n,o.d=function(t,e,i){o.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:i})},o.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},o.t=function(t,e){if(1&e&&(t=o(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var i=Object.create(null);if(o.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var n in t)o.d(i,n,function(e){return t[e]}.bind(null,n));return i},o.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return o.d(e,"a",e),e},o.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},o.p="/play-list/";var r=window["webpackJsonp"]=window["webpackJsonp"]||[],c=r.push.bind(r);r.push=e,r=r.slice();for(var d=0;d<r.length;d++)e(r[d]);var l=c;s.push([0,"chunk-vendors"]),i()})({0:function(t,e,i){t.exports=i("56d7")},1032:function(t,e,i){"use strict";var n=i("a4b7"),a=i.n(n);a.a},"210a":function(t,e,i){},4365:function(t,e,i){},"4c07":function(t,e,i){},"56d7":function(t,e,i){"use strict";i.r(e);i("e260"),i("e6cf"),i("cca6"),i("a79d");var n=i("2b0e"),a=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{attrs:{id:"app"}},[i("Search",{on:{"emit-video":t.computedVideo}}),i("div",{staticClass:"main"},[i("div",{staticClass:"main__video"},[t._m(0),i("Control",{attrs:{title:t.currentTitle,random:t.videos.isRandom,repeat:t.videos.isRepeat,playing:t.activeState.playing},on:{"emit-play":t.playVideo,"emit-pause":t.pauseVideo,"emit-stop":t.stopVideo,"emit-prev":t.prevVideo,"emit-next":t.nextVideo,"emit-random":t.isRandom,"emit-repeat":t.isRepeat}}),t.secretTechnique.active?i("div",{staticClass:"main__secret"},[i("div",{staticClass:"main__add"},[i("input",{directives:[{name:"model",rawName:"v-model",value:t.secretTechnique.tempInfo,expression:"secretTechnique.tempInfo"}],staticClass:"main__add-input",attrs:{type:"text"},domProps:{value:t.secretTechnique.tempInfo},on:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.getInfo(e)},input:function(e){e.target.composing||t.$set(t.secretTechnique,"tempInfo",e.target.value)}}}),i("span",{on:{click:t.getInfo}},[t._v("新增")])]),i("div",{staticClass:"main__copy"},[i("span",{on:{click:t.copyInfo}},[t._v("複製播放清單")]),i("input",{staticClass:"main__copy-input",attrs:{type:"text"}})])]):t._e()],1),i("Playlist",{attrs:{"current-list":t.currentVideo.list,"current-index":t.currentVideo.index},on:{"emit-change":t.changeVideo,"emit-remove":t.removeVideo}})],1),i("MenuArea",{attrs:{"prop-list":t.list},on:{"change-list":t.changeCurrentList,"push-list":t.addNewList,"remove-list":t.removeList}}),i("AddToOther",{attrs:{"prop-list":t.list,"prop-list-index":t.currentVideo.listIndex},on:{"add-other-list":t.addOtherVideo}})],1)},s=[function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"main__play"},[i("div",{attrs:{id:"player"}})])}],o=(i("c740"),i("4160"),i("a434"),i("159b"),function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"search"},[i("div",{staticClass:"search__box"},[i("input",{directives:[{name:"model",rawName:"v-model",value:t.searchInput,expression:"searchInput"}],attrs:{type:"text",placeholder:"請輸入 Youtube 影片網址"},domProps:{value:t.searchInput},on:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.addVideo(e)},input:function(e){e.target.composing||(t.searchInput=e.target.value)}}})]),i("div",{staticClass:"search__btn",on:{click:t.addVideo}},[t._v("ADD")])])}),r=[],c=(i("c975"),i("fb6a"),i("d3b7"),i("ac1f"),i("25f0"),i("466d"),i("5319"),i("bc3a")),d=i.n(c),l={data:function(){return{searchInput:"",temp:{}}},methods:{addVideo:function(){var t=this;if(""===t.searchInput)return!1;if(-1===t.searchInput.indexOf("https://www.youtube.com/watch?v="))return alert("請輸入 Youtube 影片網址，\ne.g., https://www.youtube.com/watch?v=jNQXAC9IVRw"),t.searchInput="",!1;var e=t.searchInput.match(/v=([\w-]*)/).slice(1);null!==e&&(t.searchVideo(e.toString().replace("v=","")),t.searchInput="")},searchVideo:function(t){var e=this,i="https://www.googleapis.com/youtube/v3/videos?id=".concat(t,"&key=AIzaSyCgylx6xrsalOftXeN2XtxeQHZ3j2azAZA&part=snippet,contentDetails");d.a.get(i).then((function(t){if(void 0===t.data.items||0===t.data.items.length)return alert("請輸入正確的 Youtube 影片網址"),!1;var i=t.data.items[0];e.temp={id:i.id,channelTitle:i.snippet.channelTitle,title:i.snippet.title,duration:i.contentDetails.duration,imgSrc:i.snippet.thumbnails.default.url,addOtherStatus:!1}})).finally((function(){if(void 0===e.temp.id)return!1;e.$emit("emit-video",e.temp),e.temp={}}))}}},u=l,p=(i("e589"),i("2877")),v=Object(p["a"])(u,o,r,!1,null,null,null),f=v.exports,h=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"control"},[i("div",{staticClass:"control__title"},[t._v(" "+t._s(t.returnTitle)+" ")]),i("div",{staticClass:"control__box"},[i("div",{staticClass:"control__prev",attrs:{title:"Prev"},on:{click:t.prevVideo}},[i("i",{staticClass:"fa fa-step-backward",attrs:{"aria-hidden":"true"}})]),0==t.returnPlaying?i("div",{staticClass:"control__play",attrs:{title:"Play"},on:{click:t.playVideo}},[i("i",{staticClass:"fa fa-play",attrs:{"aria-hidden":"true"}})]):t._e(),1==t.returnPlaying?i("div",{staticClass:"control__pause",attrs:{title:"Pause"},on:{click:t.pauseVideo}},[i("i",{staticClass:"fa fa-pause",attrs:{"aria-hidden":"true"}})]):t._e(),i("div",{staticClass:"control__next",attrs:{title:"Next"},on:{click:t.nextVideo}},[i("i",{staticClass:"fa fa-step-forward",attrs:{"aria-hidden":"true"}})]),i("div",{staticClass:"control__random",class:{isRandom:t.returnRandom},attrs:{title:"Random"},on:{click:t.isRandom}},[i("i",{staticClass:"fa fa-random",attrs:{"aria-hidden":"true"}})]),i("div",{staticClass:"control__repeat",class:{isRepeat:t.returnRepeat},attrs:{title:"Repeat"},on:{click:t.isRepeat}},[i("i",{staticClass:"fa fa-repeat",attrs:{"aria-hidden":"true"}})])])])},m=[],y=(i("38cf"),{props:["title","random","repeat","playing"],data:function(){return{isPlaying:this.playing}},computed:{returnTitle:function(){return this.title},returnRandom:function(){return this.random},returnRepeat:function(){return this.repeat},returnPlaying:function(){return this.playing}},methods:{playVideo:function(){this.returnPlaying=!this.returnPlaying,this.$emit("emit-play")},pauseVideo:function(){this.returnPlaying=!this.returnPlaying,this.$emit("emit-pause")},stopVideo:function(){this.$emit("emit-stop")},prevVideo:function(){this.$emit("emit-prev")},nextVideo:function(){this.$emit("emit-next")},isRandom:function(){this.$emit("emit-random")},isRepeat:function(){this.$emit("emit-repeat")},getLocalInfo:function(t){return JSON.parse(localStorage.getItem(t))},saveLocalInfo:function(t){var e=this;return localStorage.setItem(t,JSON.stringify(e.videoInfo))}}}),_=y,g=(i("b15b"),Object(p["a"])(_,h,m,!1,null,null,null)),C=g.exports,V=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"main__list"},[i("div",{staticClass:"total__top"},[i("div",{staticClass:"total__list"},t._l(t.computedList,(function(e,n){return i("div",{key:n,staticClass:"total__item",on:{click:function(i){return t.changeVideo(e.id,n)},mouseleave:function(e){return t.checkStatus(n)}}},[i("div",{staticClass:"total__img"},[i("img",{attrs:{src:e.imgSrc}}),i("span",{staticClass:"total__duration"},[t._v(" "+t._s(t.durationToSeconds("changeToTime",e.duration))+" ")])]),i("div",{staticClass:"total__info"},[i("span",{staticClass:"total__title"},[t._v(" "+t._s(e.title)+" ")]),i("span",{staticClass:"total__channel"},[t._v(t._s(e.channelTitle))])]),i("div",{staticClass:"total-modify"},[i("div",{staticClass:"total-modify__more",on:{click:function(e){return e.stopPropagation(),t.changeStatus(n)}}},[i("i",{staticClass:"fa fa-ellipsis-v",attrs:{"aria-hidden":"true"}}),i("div",{staticClass:"total-modify__box",class:{"is-active":e.addOtherStatus},on:{click:function(e){return t.addOtherVideo(n)}}},[i("div",{staticClass:"total-modify__item"},[t._v("新增到其他列表")])])]),i("div",{staticClass:"total-modify__remove",on:{click:function(e){return e.stopPropagation(),t.removeVideo(n)}}},[i("i",{staticClass:"fa fa-remove",attrs:{"aria-hidden":"true"}})])])])})),0)]),i("div",{staticClass:"total__bottom"},[t._v(" 總共 "+t._s(t.computedList.length)+" 首，共 "+t._s(t.totalVideoTime())+" 分 ")])])},b=[],I=(i("a15b"),i("d81d"),{props:["currentList","currentIndex"],data:function(){return{addDatas:{video:{},active:!1}}},computed:{computedList:function(){return this.currentList}},methods:{durationToSeconds:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"changeToTime",e=arguments.length>1?arguments[1]:void 0,i=[],n=e.match(/PT(\d+H)?(\d+M)?(\d+S)?/);n=n.slice(1).map((function(t){if(null!=t)return t.replace(/\D/,"")}));var a=parseInt(n[0])||0,s=parseInt(n[1])||0,o=parseInt(n[2])-1||0;switch(t){case"changeToTime":return 0===a?i.push(s,o):i.push(a,s,o),i.join(":");case"seconds":return 3600*a+60*s+o}},totalVideoTime:function(){var t=this,e=0;return t.computedList.forEach((function(i){var n=t.durationToSeconds("seconds",i.duration);e+=n})),Math.ceil(e/60)},changeStatus:function(t){this.computedList[t].addOtherStatus=!this.computedList[t].addOtherStatus},checkStatus:function(t){!0===this.computedList[t].addOtherStatus&&(this.computedList[t].addOtherStatus=!1)},addOtherVideo:function(t){this.addDatas.active=!0,this.addDatas.video=this.currentList[t],this.$bus.$emit("video:other",this.addDatas)},removeVideo:function(t){this.$emit("emit-remove",t)},changeVideo:function(t,e){this.$emit("emit-change",t,e)}}}),x=I,k=(i("7cab"),Object(p["a"])(x,V,b,!1,null,null,null)),S=k.exports,T=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"menu",class:{"menu--active":t.menuStatus}},[i("div",{staticClass:"menu-mask",on:{click:function(e){t.menuStatus=!t.menuStatus}}}),i("div",{staticClass:"menu-button",on:{click:function(e){e.stopPropagation(),t.menuStatus=!t.menuStatus}}},[i("i",{staticClass:"fa fa-bars",attrs:{"aria-hidden":"true"}})]),i("div",{staticClass:"menu-box",class:{"is-active":t.menuStatus}},[i("div",{staticClass:"menu-box__top"},[i("h2",{staticClass:"menu-box__title"},[t._v("播放清單")]),i("input",{directives:[{name:"model",rawName:"v-model",value:t.newListName,expression:"newListName"}],staticClass:"menu-box__new",class:{"is-active":t.activeInput},attrs:{type:"text",placeholder:"輸入清單名稱"},domProps:{value:t.newListName},on:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.addList(e)},input:function(e){e.target.composing||(t.newListName=e.target.value)}}}),i("div",{staticClass:"menu-box__add"},[0==t.activeInput?[i("p",{on:{click:function(e){t.activeInput=!t.activeInput}}},[t._v("新增播放清單")])]:[i("p",{on:{click:t.addList}},[t._v("新增清單")])]],2)]),i("div",{staticClass:"menu-list"},t._l(t.datas,(function(e,n){return i("div",{key:n,staticClass:"menu-list__item",on:{click:function(e){return t.changeList(n)}}},[i("p",[t._v(t._s(e))]),i("div",{staticClass:"menu-list__remove",on:{click:function(e){return e.stopPropagation(),t.removeList(n)}}},[i("i",{staticClass:"fa fa-remove",attrs:{"aria-hidden":"true"}})])])})),0)])])},w=[],L={props:["propList"],data:function(){return{datas:this.propList,newListName:"",activeInput:!1,menuStatus:!1}},methods:{changeList:function(t){this.$emit("change-list",t)},addList:function(){var t=this;if(t.activeInput=!t.activeInput,""==t.newListName)return!1;t.$emit("push-list",t.newListName),t.newListName=""},removeList:function(t){this.$emit("remove-list",t)}}},O=L,P=(i("1032"),Object(p["a"])(O,T,w,!1,null,null,null)),R=P.exports,$=function(){var t=this,e=t.$createElement,i=t._self._c||e;return t.otherStates?i("div",{staticClass:"other"},[i("div",{staticClass:"other__mask",on:{click:function(e){t.states=!1}}}),i("div",{staticClass:"other__list"},t._l(t.list,(function(e,n){return i("div",{key:n,staticClass:"other__item"},[n!==t.propListIndex?i("p",{on:{click:function(e){return t.addToOther(n)}}},[t._v(" "+t._s(e)+" ")]):t._e()])})),0)]):t._e()},N=[],j={props:["propList","propListIndex"],data:function(){return{list:this.propList,emitData:{listIndex:0,data:{}},states:!1}},methods:{addToOther:function(t){var e=this;e.states=!1,e.emitData.listIndex=t,e.$emit("add-other-list",e.emitData)}},computed:{otherStates:function(){return this.states&&this.propList.length-1>0}},created:function(){var t=this;t.$bus.$on("video:other",(function(e){t.emitData.data=e.video,t.states=e.active}))},beforeDestroy:function(){this.$bus.$off("video:other")}},q=j,M=(i("debc"),Object(p["a"])(q,$,N,!1,null,null,null)),D=M.exports,E={name:"App",components:{Search:f,Control:C,Playlist:S,MenuArea:R,AddToOther:D},data:function(){return{player:"",videos:{isRandom:!1,isRepeat:!1,list:[]},list:[],currentVideo:{id:"",title:"",index:0,listIndex:0,list:[]},activeState:{more:!1,other:!1,playing:!1},secretTechnique:{active:!1,code:"38384040373937396665",temp:"",tempInfo:""}}},methods:{computedVideo:function(t){var e=this;e.videos.list[e.currentVideo.listIndex].info.push(t),e.saveInfo("play-videos",e.videos),1==e.videos.list[0].info.length&&setTimeout((function(){e.setVideo()}),1e3)},isRandom:function(){var t=this;t.videos.isRandom=!t.videos.isRandom,t.saveInfo("play-videos",t.videos)},isRepeat:function(){var t=this;t.videos.isRepeat=!t.videos.isRepeat,t.saveInfo("play-videos",t.videos)},playVideo:function(){this.player.playVideo()},pauseVideo:function(){this.player.pauseVideo()},stopVideo:function(){this.player.stopVideo()},prevVideo:function(){var t=this,e=t.currentVideo;if(t.videos.isRandom){var i=Math.floor(Math.random()*e.list.length);e.id=e.list[i].id,e.title=e.list[i].title,e.index=i}else{var n=e.list.findIndex((function(t){return t.id===e.id}));n-1!==-1?n-=1:n=e.list.length-1,e.id=e.list[n].id,e.title=e.list[n].title,e.index=n}t.loadVideo(e.id)},nextVideo:function(){var t=this,e=t.currentVideo;if(t.videos.isRandom){var i=Math.floor(Math.random()*e.list.length);e.id=e.list[i].id,e.title=e.list[i].title,e.index=i}else{var n=e.list.findIndex((function(t){return t.id===e.id}));n+1===e.list.length?n=0:n+=1,e.id=e.list[n].id,e.title=e.list[n].title,e.index=n}t.loadVideo(e.id)},loadVideo:function(t){this.player.loadVideoById({videoId:t})},setVideo:function(){this.player=new window.YT.Player("player",{height:"100%",width:"100%",videoId:this.currentVideo.id,playerVars:{id_load_policy:3,rel:0},events:{onStateChange:this.onStateChange}})},onStateChange:function(t){var e=this;0===t.data&&e.videos.isRepeat?e.player.playVideo():0===t.data&&e.nextVideo(),(1===t.data||2===t.data)&&(this.activeState.playing=!this.activeState.playing)},changeVideo:function(t,e){this.currentVideo.id=t,this.currentVideo.index=e,this.currentVideo.title=this.currentVideo.list[e].title,this.player.loadVideoById({videoId:t})},removeVideo:function(t){var e=this;e.videos.list[e.currentVideo.listIndex].info.splice(t,1),e.saveInfo("play-videos",e.videos)},copyInfo:function(){var t=this,e=document.querySelector(".main__copy-input");e.value=JSON.stringify(t.videos),e.focus(),e.select(),document.execCommand("copy"),e.value=""},getInfo:function(){var t=this;t.saveInfo("play-videos",JSON.parse(t.secretTechnique.tempInfo)),t.secretTechnique.tempInfo=""},changeCurrentList:function(t){var e=this;e.currentVideo.list=e.videos.list[t].info,e.currentVideo.listIndex=t},addNewList:function(t){var e=this;e.list.push(t),e.videos.list.push({title:t,info:[]}),e.saveInfo("play-videos",e.videos)},removeList:function(t){var e=this;e.list.splice(t,1),e.videos.list.splice(t,1),e.saveInfo("play-videos",e.videos)},addOtherVideo:function(t){var e=this;e.videos.list[t.listIndex].info.push(t.data),e.saveInfo("play-videos",e.videos)},localInfo:function(t){return JSON.parse(localStorage.getItem(t))},saveInfo:function(t,e){return localStorage.setItem(t,JSON.stringify(e))}},computed:{currentTitle:function(){return this.currentVideo.title}},mounted:function(){var t=this,e=t.currentVideo,i=document.createElement("script");i.src="https://www.youtube.com/iframe_api";var n=document.getElementsByTagName("script")[0];if(n.parentNode.insertBefore(i,n),localStorage.getItem("play-videos")&&(t.videos=t.localInfo("play-videos")),0!==t.videos.list.length)e.index=0,e.list=t.videos.list[0].info,e.title=e.list[0].title,e.id=e.list[0].id;else{var a=[{title:"Custom list",info:[{id:"DA5NLKYDxfQ",channelTitle:"TheMurkyCrows",imgSrc:"https://i.ytimg.com/vi/DA5NLKYDxfQ/default.jpg",title:"昏鴉 - 王國三部曲之壹 《萬中選一的青年》Lyrics Video",duration:"PT4M30S",addOtherStatus:!1},{id:"YRhkduoNlzA",channelTitle:"TheMurkyCrows",imgSrc:"https://i.ytimg.com/vi/YRhkduoNlzA/default.jpg",title:"昏鴉 - 王國三部曲之貳 《為了已死去的王子》Lyrics Video",duration:"PT5M12S",addOtherStatus:!1},{id:"zmsnipltJTM",channelTitle:"TheMurkyCrows",imgSrc:"https://i.ytimg.com/vi/zmsnipltJTM/default.jpg",title:"昏鴉 - 王國三部曲之參 《願你的王國榮耀》Lyrics Video",duration:"PT5M24S",addOtherStatus:!1}]}];t.videos.list=a,e.index=0,e.list=t.videos.list[0].info,e.title=e.list[0].title,e.id=e.list[0].id,t.saveInfo("play-videos",t.videos)}t.videos.list.forEach((function(e){t.list.push(e.title)})),window.addEventListener("keydown",(function(e){if(0==t.secretTechnique.active){switch(e.keyCode){case 37:t.secretTechnique.temp+=e.keyCode;break;case 38:t.secretTechnique.temp+=e.keyCode;break;case 39:t.secretTechnique.temp+=e.keyCode;break;case 40:t.secretTechnique.temp+=e.keyCode;break;case 65:t.secretTechnique.temp+=e.keyCode;break;case 66:t.secretTechnique.temp+=e.keyCode;break;default:t.secretTechnique.temp=""}t.secretTechnique.temp==t.secretTechnique.code&&(t.secretTechnique.active=!0)}}))},created:function(){var t=this;setTimeout((function(){t.setVideo()}),1500)}},A=E,J=(i("5c0b"),Object(p["a"])(A,a,s,!1,null,null,null)),Y=J.exports;n["a"].config.productionTip=!1,n["a"].prototype.$bus=new n["a"],new n["a"]({render:function(t){return t(Y)}}).$mount("#app")},"5c0b":function(t,e,i){"use strict";var n=i("9c0c"),a=i.n(n);a.a},"7cab":function(t,e,i){"use strict";var n=i("210a"),a=i.n(n);a.a},"9c0c":function(t,e,i){},a4b7:function(t,e,i){},b15b:function(t,e,i){"use strict";var n=i("e1e7"),a=i.n(n);a.a},debc:function(t,e,i){"use strict";var n=i("4c07"),a=i.n(n);a.a},e1e7:function(t,e,i){},e589:function(t,e,i){"use strict";var n=i("4365"),a=i.n(n);a.a}});
//# sourceMappingURL=app.07c4d267.js.map